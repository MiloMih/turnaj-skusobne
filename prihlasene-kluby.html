<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prihlásené kluby - Dynamická tabuľka</title> <link rel="icon" href="favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="style.css"> <style>
        /* Základný štýl pre body a main, ak už nie je v style.css */
        body {
             margin: 0;
             padding: 0;
             font-family: sans-serif;
             /* Ak máš pevnú hlavičku stránky, možno bude potrebné padding-top na body alebo margin-top na main */
         }

        /* Štýly pre sekcie, ak už nie sú v style.css */
        .section-block {
             margin-bottom: 20px;
             padding: 20px;
             background-color: #fff;
             box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
             border-radius: 8px;
         }

        /* ---------- Štýly pre skrolovateľnú tabuľku a sticky hlavičku (kompatibilné s dynamickými stĺpcami) ---------- */

        /* Obalový kontajner pre tabuľku - zabezpečí skrolovanie */
        .table-scroll-container {
            max-height: 400px; /* NASTAVTE POŽADOVANÚ MAXIMÁLNU VÝŠKU */
            overflow-y: auto; /* Zapne vertikálne skrolovanie */
            /* Optional: pre vizuálne ohraničenie boxu */
            border: 1px solid #ccc;
        }

        /* Samotná tabuľka vo vnútri kontajnera */
        .data-table {
            width: 100%; /* Zabezpečí, že tabuľka vyplní šírku kontajnera */
            border-collapse: collapse;
            /* DÔLEŽITÉ: ODSTRÁNILI SME DISPLAY: BLOCK NA THEAD/TBODY A DISPLAY: FLEX NA TR */
            /* DÔLEŽITÉ: ODSTRÁNILI SME PEVNÉ ŠÍRKY STĹPCOV VIAZANÉ NA :NTH-CHILD */
        }

        /* Hlavička tabuľky - TOTO JE STICKY ELEMENT */
        .data-table thead {
            position: sticky; /* Urobí hlavičku lepiacou v rámci kontajnera */
            top: 0; /* Lepí sa na horný okraj skrolovateľného rodiča */
            z-index: 1; /* Zabezpečí, že je nad obsahom tela */
            background-color: #3a8d41; /* Pridajte farbu pozadia */
            color: white;
            /* NEPOUŽÍVAŤ DISPLAY: BLOCK TU */
        }

        /* Štýly pre bunky hlavičky a tela */
        /* Tieto štýly sa aplikujú bez ohľadu na to, koľko stĺpcov je v thead/tbody */
        .data-table th,
        .data-table td {
            padding: 10px 15px;
            text-align: left;
            border-bottom: 1px solid #eee;
            /* NEPOUŽÍVAŤ PEVNÉ ŠÍRKY TU, ak majú byť stĺpce dynamické a flexibilné */
        }

        .data-table th {
             font-weight: bold;
             border-bottom: 2px solid #2a6b30;
         }

        /* Štýly pre párne riadky */
        .data-table tbody tr:nth-child(even) {
            background-color: #f9f9f9;
        }

        /* Štýly pre hover riadkov */
        .data-table tbody tr:hover {
             background-color: #e9e9e9;
             cursor: pointer;
         }


        /* Štýl pre bunku s colspan (Načítavam...) */
        /* Colspan by mal ideálne zodpovedať maximálnemu počtu stĺpcov, ktoré očakávaš */
         .data-table tbody tr td[colspan] {
             text-align: center !important;
             font-style: italic;
             color: #777;
             background-color: transparent !important;
             /* Ak už nie je display: flex na tr, tieto pravidlá nemajú plný efekt centrovania,
                ale text-align: center stále funguje */
         }

         /* ---------- Štýly pre detail sekciu ---------- */

         #clubDetailSection {
             display: none; /* Sekcia detailov je pôvodne skrytá */
         }

         .action-button {
             padding: 10px 15px;
             background-color: #007bff;
             color: white;
             border: none;
             border-radius: 5px;
             cursor: pointer;
             margin-bottom: 20px;
             font-size: 1em;
             transition: background-color 0.2s ease;
         }

         .action-button:hover {
             background-color: #0056b3;
         }

         #teamsInCategoryButtons {
             display: flex;
             flex-wrap: wrap;
             gap: 10px;
             margin-bottom: 15px;
         }

         #selectedTeamDetails h4 {
             margin-top: 0;
             margin-bottom: 10px;
             border-bottom: 1px solid #eee;
             padding-bottom: 5px;
         }

         #selectedTeamRealizacnyTim p {
             margin: 5px 0;
         }

         #selectedTeamSoupiskaHracov {
             list-style: none;
             padding: 0;
             margin: 0;
         }

         #selectedTeamSoupiskaHracov li {
             margin-bottom: 5px;
             padding-bottom: 5px;
             border-bottom: 1px dotted #ccc;
         }

         #selectedTeamSoupiskaHracov li:last-child {
             border-bottom: none;
         }


    </style>
</head>
<body>
    <script type="module" src="auth.js"></script>
    <script src="script.js"></script>

    <h1>Prihlásené kluby</h1>

    <main>
        <section id="clubListSection" class="section-block">
            <div class="table-scroll-container">
                <table id="clubsSummaryTable" class="data-table">
                    <thead>
                        <tr id="clubsSummaryTableHeader">
                            <th>Názov klubu</th>
                            </tr>
                    </thead>
                    <tbody id="clubsSummaryTableBody">
                        <tr>
                            <td colspan="1" style="text-align: center;">Načítavam prehľad...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <section id="clubDetailSection" class="section-block" style="display: none;">
            <button id="backToListButton" class="action-button">← Späť na prehľad</button>
            <h2 id="clubDetailTitle"><span></span></h2>
            <div id="clubDetailContent">
                 <div id="teamsInCategoryButtons">
                     Načítavam tímy...
                 </div>
                 <div id="selectedTeamDetails">
                     <h4>Realizačný tím</h4>
                     <div id="selectedTeamRealizacnyTim">
                          <p>Tréner: <span id="selectedTeamTrenerInfo">Nezadané</span></p>
                          <p>Vedúci družstva: <span id="selectedTeamVeduciDruzstvaInfo">Nezadané</span></p>
                     </div>
                     <h4>Súpiska hráčov</h4>
                     <ul id="selectedTeamSoupiskaHracov">
                          <li>Zatiaľ bez súpisky.</li>
                     </ul>
                 </div>
             </div>
        </section>
    </main>

    <script type="module" src="spravca-turnaja-common.js"></script>
    <script type="module" src="prihlasene-kluby.js"></script>

    <script>
        // PRÍKLAD AKO JAVASCRIPT PRIDÁ DYNAMICKÉ STĹPCE DO HLAVIČKY A TELA
        // V TVOJOM REÁLNOM KÓDE BUDE TÁTO LOGIKA INÁ

        document.addEventListener('DOMContentLoaded', function() {
             const tableHeadRow = document.getElementById('clubsSummaryTableHeader');
             const tableBody = document.getElementById('clubsSummaryTableBody');

             // Simulácia dynamicky zistených kategórií
             const dynamicCategories = ["U10", "U12", "U14", "U16"]; // Príklad dynamických kategórií

             // Odstrániť pôvodné stĺpce okrem prvého (Názov klubu)
             while (tableHeadRow.children.length > 1) {
                 tableHeadRow.removeChild(tableHeadRow.lastChild);
             }

             // Pridať dynamické hlavičky stĺpcov
             dynamicCategories.forEach(cat => {
                 const thD = document.createElement('th');
                 thD.textContent = cat + " D";
                 tableHeadRow.appendChild(thD);

                 const thCH = document.createElement('th');
                 thCH.textContent = cat + " CH";
                 tableHeadRow.appendChild(thCH);
             });

             // Pridať hlavičku pre "Prihlásenie" (ak je vždy na konci)
              const thPrihlasenie = document.createElement('th');
              thPrihlasenie.textContent = "Prihlásenie";
              tableHeadRow.appendChild(thPrihlasenie);

              const finalColCount = tableHeadRow.children.length;
              const loadingCell = tableBody.querySelector('td[colspan]');
              if (loadingCell) {
                  loadingCell.colSpan = finalColCount;
              }
         });

    </script>

</body>
</html>
